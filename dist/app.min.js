!function(){"use strict";function e(e,t){e.when("/details/:id",{templateUrl:"app/components/details/details.html",controller:"detailsCtrl",controllerAs:"details"}).when("/favorites",{templateUrl:"app/components/favorites/favorites.html",controller:"favoritesCtrl",controllerAs:"favorites"}).when("/search",{templateUrl:"app/components/search/search.html",controller:"searchCtrl",controllerAs:"search"}).otherwise({redirectTo:"/search"})}angular.module("myBookApp",["ngRoute"]).config(e),e.$inject=["$routeProvider","$locationProvider"]}(),function(){"use strict";function e(e){var t=this;t.startIndex=0,t.searchBook=function(o){t.keyword!==o&&(t.keyword=o,t.startIndex=0),e.search(t.keyword,t.startIndex).then(function(e){t.searchResults=e.data})},t.goNextPage=function(e){t.startIndex=t.startIndex+40,t.searchBook(e)},t.goPreviousPage=function(e){t.startIndex=t.startIndex-40,t.searchBook(e)}}angular.module("myBookApp").controller("searchCtrl",e),e.$inject=["bookService"]}(),function(){"use strict";function e(e){var t="https://www.googleapis.com/books/v1/volumes",o="key=AIzaSyD3d4rTM7BRgBoM2Ug23I6o5hAxnKuJpwA";this.search=function(r,i){var n=t+"?q={keyword}&startIndex={startIndex}&maxResults=40&{key}";return n=n.replace("{keyword}",r).replace("{startIndex}",i).replace("{key}",o),e.get(n)},this.getById=function(r){var i=t+"/{id}/?{key}";return i=i.replace("{id}",r).replace("{key}",o),e.get(i)}}angular.module("myBookApp").service("bookService",e),e.$inject=["$http"]}(),function(){"use strict";function e(){var e=this;e.addFavorite=function(t){var o=e.getFavorites();o.map(function(e){return e.id}).indexOf(t.id)<0?(o.push(t),localStorage.setItem("myBookApp",JSON.stringify(o))):e.removeFavorite(t)},e.removeFavorite=function(t){var o=e.getFavorites();o=o.filter(function(e,o){return t.id!==e.id}),localStorage.setItem("myBookApp",JSON.stringify(o))},e.getFavorites=function(){return localStorage.getItem("myBookApp")?JSON.parse(localStorage.getItem("myBookApp")):[]},e.getIds=function(){return e.getFavorites().map(function(e){return e.id})}}angular.module("myBookApp").service("storageService",e),e.$inject=[]}(),function(){"use strict";function e(e,t){var o=this;o.getBook=function(r){r=r||e.id,t.getById(r).then(function(e){o.book=e.data})}}angular.module("myBookApp").controller("detailsCtrl",e),e.$inject=["$routeParams","bookService"]}(),function(){"use strict";function e(e){var t=this;t.getFavorites=function(){t.books=e.getFavorites()}}angular.module("myBookApp").controller("favoritesCtrl",e),e.$inject=["storageService"]}(),function(){"use strict";function e(e){return{scope:{authors:"=",book:"=",description:"=",image:"=",categories:"=",id:"="},templateUrl:"app/shared/directives/book-card/book-card.html",link:function(t,o,r){e.getIds().indexOf(t.id)>-1?t.isFavorite=!0:t.isFavorite=!1,t.addFavorite=function(){var o={title:t.book,description:t.description,authors:t.authors,image:t.image,categories:t.categories,id:t.id};e.addFavorite(o),t.isFavorite=!t.isFavorite}}}}angular.module("myBookApp").directive("bookCard",e),e.$inject=["storageService"]}(),function(){"use strict";function e(){return{scope:{description:"=",identifiers:"=",download:"=",images:"="},templateUrl:"app/shared/directives/tabs/tabs.html",link:function(e,t,o){e.toggleTab=function(e){document.getElementsByClassName("is-active")[0].classList.remove("is-active");for(var t=document.getElementsByClassName("tabs-content"),o=0;o<t.length;o++)t[o].style.display="none";document.getElementsByClassName(e)[0].classList.add("is-active"),document.getElementById(e).style.display="block"}}}}angular.module("myBookApp").directive("tabs",e),e.$inject=[]}(),function(){"use strict";function e(e){return function(t,o,r){return t?e.trustAsHtml(t.replace(new RegExp("("+o+")","gi"),'<span class="search-highlight">$1</span>').substring(0,200)+'... <a href="#!/details/'+r+'">Ver Mais</a>'):t}}angular.module("myBookApp").filter("highlight",e),e.$inject=["$sce"]}();